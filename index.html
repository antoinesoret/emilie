<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>C√©l√©bration ‚Äì {{Date}} | Blumen‚ÄëFeier ‚Äì {{Datum}}</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --accent: #e46fb3;         /* floral accent color */
      --bg-pink: #fdeef1;        /* soft pink base */
    }
    *, *::before, *::after {box-sizing: border-box;}
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: var(--bg-pink) url('floral-pattern.png') center/cover fixed;
      color: #333;
      line-height: 1.5;
    }
    /* Overlay to soften the pattern */
    body::before {
  content: "";
  position: fixed;
  inset: 0;
  background: var(--bg-pink);
  opacity: 0.98;
  z-index: -1;
}
    #content.hidden { display: none; }
    .lang-toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      display: flex;
      gap: .5rem;
      z-index: 10;
    }
    .lang-toggle button {
      background: #fff;
      border: 2px solid var(--accent);
      color: var(--accent);
      padding: .25rem .75rem;
      border-radius: 1.5rem;
      font-weight: 600;
      cursor: pointer;
      transition: background .2s, color .2s;
    }
    .lang-toggle button.active,
    .lang-toggle button:hover {
      background: var(--accent);
      color: #fff;
    }
    header {
      text-align: center;
      padding: 3rem 1rem 2rem;
    }
    header h1 {
      margin: 0;
      font-size: 2.5rem;
      color: var(--accent);
    }
    header p {
      margin: .5rem 0 0;
      font-size: 1.1rem;
      opacity: .8;
    }
    .section {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }
    .section h2 {
      text-align: center;
      font-size: 1.5rem;
      margin-bottom: .75rem;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .section p {
      margin: .5rem 0 1rem;
    }
    .map-wrapper {
      position: relative;
      padding-top: 56.25%;
      border-radius: 1rem;
      overflow: hidden;
      box-shadow: 0 4px 16px rgba(0,0,0,.08);
    }
    .map-wrapper iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }
    footer {
      text-align: center;
      font-size: .85rem;
      opacity: .6;
      padding: 2rem 1rem 3rem;
    }
    /* Password modal */
    #login-overlay {
      position: fixed;
      inset: 0;
      background: rgba(253,238,241,.98);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 20;
    }
    .modal {
      background: #fff;
      padding: 2rem 2.5rem;
      border-radius: 1.25rem;
      box-shadow: 0 8px 24px rgba(0,0,0,.1);
      text-align: center;
      width: 90%;
      max-width: 400px;
    }
    .modal h2 {
      margin: 0 0 1rem;
      color: var(--accent);
      font-size: 1.25rem;
      line-height: 1.4;
    }
    .modal input {
      width: 100%;
      padding: .75rem 1rem;
      border: 2px solid var(--accent);
      border-radius: 1.5rem;
      font-size: 1rem;
      margin: .75rem 0;
    }
    .modal button {
      width: 100%;
      background: var(--accent);
      color: #fff;
      border: none;
      padding: .75rem;
      border-radius: 1.5rem;
      font-weight: 600;
      cursor: pointer;
      font-size: 1rem;
    }
    .modal p.err {
      color: #c00;
      font-size: .9rem;
      height: 1.25rem;
      margin: .25rem 0 0;
    }
    @media (max-width: 480px) {
      header h1 { font-size: 1.9rem; }
      .section h2 { font-size: 1.3rem; }
    }
  </style>
</head>
<body>
  <!-- Language switcher -->
  <div class="lang-toggle">
    <button data-lang="fr" class="active">FR</button>
    <button data-lang="de">DE</button>
  </div>

  <!-- Protected content -->
  <div id="content" class="hidden">
    <header>
      <h1 id="headline"></h1>
      <p id="subline"></p>
    </header>
    <section class="section" id="when">
      <h2 id="when-title"></h2>
      <p id="when-text"></p>
    </section>
    <section class="section" id="where">
      <h2 id="where-title"></h2>
      <p id="address"></p>
      <p><a id="gmap-link" href="{{GoogleMapsLink}}" target="_blank" rel="noopener">Google¬†Maps ‚Üó</a></p>
      <div class="map-wrapper">
        <iframe id="map-iframe" src="{{GoogleMapsEmbed}}" loading="lazy" allowfullscreen></iframe>
      </div>
    </section>
    <section class="section" id="food">
      <h2 id="food-title"></h2>
      <p id="food-text"></p>
    </section>
    <footer id="footer"></footer>
  </div>

  <!-- Password modal -->
  <div id="login-overlay">
    <div class="modal">
      <h2>Entrez le mot de passe<br/>Passwort eingeben</h2>
      <input type="password" id="pass" placeholder="Mot de passe / Passwort" />
      <button id="login-btn">OK</button>
      <p id="err" class="err"></p>
    </div>
  </div>

  <script>
    /* Password check (SHA-256 hash) */
    const HASH = "8746123202abcf57509bcf4a20b72268cdd94b60629d60d9a5c30bffd45f16d8";
    const overlay = document.getElementById('login-overlay');
    const content = document.getElementById('content');
    async function sha256(txt) {
      const buf = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(txt));
      return Array.from(new Uint8Array(buf)).map(b => b.toString(16).padStart(2,'0')).join('');
    }
    function unlock() {
      overlay.style.display = 'none';
      content.classList.remove('hidden');
    }
    document.getElementById('login-btn').addEventListener('click', async () => {
      const val = document.getElementById('pass').value.trim();
      if (await sha256(val) === HASH) { sessionStorage.setItem('unlocked', 1); unlock(); }
      else { document.getElementById('err').textContent = 'Mot de passe incorrect / Falsches Passwort'; }
    });
    window.addEventListener('load', () => { if (sessionStorage.getItem('unlocked')) unlock(); });

    /* Content localization */
    const strings = {
      fr: {
        headline: "C√©l√©brons avec des fleurs !",
        subline: "Une journ√©e haute en couleurs et p√©tales.",
        whenTitle: "Date & Heure",
        whenText: "{{DayOfWeek}} {{Date}} {{Month}} {{Year}} ‚Äì √† partir de {{StartTime}}",
        whereTitle: "Lieu de la c√©l√©bration",
        address: "{{VenueName}}<br>{{StreetAddress}}<br>{{City}} {{PostalCode}}",
        foodTitle: "√Ä table !",
        foodText: "Ap√©ro et barbecue seront servis vers 14h. Prenez donc un gros petit‚Äëd√©jeuner avant de venir, pour profiter pleinement !",
        footer: "Th√®me : les fleurs. Venez habill√©s de couleurs printani√®res si le c≈ìur vous en dit. üå∏"
      },
      de: {
        headline: "Lasst uns mit Blumen feiern!",
        subline: "Ein Tag voller Farben und Bl√ºten.",
        whenTitle: "Datum & Uhrzeit",
        whenText: "{{Wochentag}}, {{Datum}} {{Monat}} {{Jahr}} ‚Äì ab {{StartTime}}",
        whereTitle: "Veranstaltungsort",
        address: "{{VenueName}}<br>{{StreetAddress}}<br>{{PostalCode}} {{City}}",
        foodTitle: "Essen & Trinken",
        foodText: "Ap√©ro und BBQ gegen 14¬†Uhr. Also st√§rkt euch morgens mit einem kr√§ftigen Fr√ºhst√ºck, damit ihr alles genie√üen k√∂nnt!",
        footer: "Thema: Blumen. Kommt gern in fr√ºhlingshaften Farben. üå∏"
      }
    };
    let current = 'fr';
    function render() {
      const s = strings[current];
      document.documentElement.lang = current;
      document.getElementById('headline').textContent = s.headline;
      document.getElementById('subline').textContent = s.subline;
      document.getElementById('when-title').textContent = s.whenTitle;
      document.getElementById('when-text').innerHTML = s.whenText;
      document.getElementById('where-title').textContent = s.whereTitle;
      document.getElementById('address').innerHTML = s.address;
      document.getElementById('food-title').textContent = s.foodTitle;
      document.getElementById('food-text').textContent = s.foodText;
      document.getElementById('footer').textContent = s.footer;
      document.querySelectorAll('.lang-toggle button').forEach(btn => btn.classList.toggle('active', btn.dataset.lang === current));
    }
    document.querySelectorAll('[data-lang]').forEach(btn => btn.addEventListener('click', e => { current = e.target.dataset.lang; render(); }));
    render();
  </script>
</body>
</html>
